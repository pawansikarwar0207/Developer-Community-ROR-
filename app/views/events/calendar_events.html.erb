<div class="col-lg-10 mx-auto mt-3" id="calendar"></div>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    var calendarEl = document.getElementById('calendar');
    var calendar = new FullCalendar.Calendar(calendarEl, {
      initialView: 'dayGridMonth',
      headerToolbar: {
        left: 'prev,next today',
        center: 'title',
        right: 'dayGridMonth,timeGridWeek,timeGridDay' // Add buttons for each initial view
      },
      events: {
        url: '<%= calendar_events_events_path(format: :json) %>',
        method: 'GET',
        failure: function() {
          alert('There was an error while fetching events!');
        }
      },
      eventDidMount: function(info) {
        var eventStart = new Date(info.event.start);
        var now = new Date();
        var eventEnd = new Date(info.event.end);
        if (eventEnd < now) {
          info.el.style.backgroundColor = 'red';
        } else if (eventStart <= now && now < eventEnd) {
          info.el.style.backgroundColor = 'green';
        }
        info.el.style.color = 'black'; // Set text color to black
      }
    });
    calendar.render();
  });
</script>


